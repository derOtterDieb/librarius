<div class="justify-content-center">
	<div class="p-grid" *ngIf="armyList">
		<h2 class="p-col-12">
			<span jhiTranslate="librariusApp.armyList.detail.title">Army
				List</span> {{ armyList.listName }}
		</h2>

		<hr>

		<jhi-alert-error></jhi-alert-error>

		<dl class="p-col-12 jh-entity-details">
			<dt>
				<span jhiTranslate="librariusApp.armyList.totalPoint">Total
					Point</span>
			</dt>
			<dd>
				<span>{{ armyList.totalPoint }}</span>
			</dd>
		</dl>

		<dl class="jh-entity-details p-col-12" *ngIf="armyList.unitMaps != null">
			<h4>Unit&eacute;</h4>
			<ul>
				<li *ngFor="let unitMap of armyList.unitMaps">
					<div class="p-grid">
                        <span class="p-col-12">{{unitMap.numberOfUnit}} x {{unitMap.unit.unitName}} ({{ unitMap.numberOfUnit * (unitMap.unit.totalPoint + computeGearPoint(unitMap))}} points)</span>
                        <span class="p-col-6">
                            <button class="btn btn-sm btn-info" type="button" (click)="toggleGear(unitMap)">
                                <i class="material-icons">settings</i>
                                &nbsp;<span>&Eacute;quipement</span>
                            </button>
                        </span>
                        <span class="p-col-6">
                            <button type="button" class="btn btn-sm btn-danger" (click)="deleteUnit(unitMap)">
                                <fa-icon icon="trash-alt"></fa-icon>
                                &nbsp;<span jhiTranslate="entity.action.delete">delete</span>
                            </button>
                        </span>
                        <div class="p-col-12 p-grid" *ngIf="toggledGear === unitMap.id">
                            <div class="p-col-12">
                                <ul>
                                    <li *ngFor="let gear of unitMap.gears">
                                        <span>{{gear.gearName}} ({{gear.pointValue}} points)</span>
                                        <button class="btn btn-sm btn-icon danger" (click)="removeGearFromUnit(gear, unitMap)">
                                            <i class="material-icons">remove_circle_outline</i>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <div class="p-col-12">
                                <button type="button" [routerLink]="['/gear-lbr/new']" class="btn btn-sm btn-primary">Créer un équipement</button>
                            </div>
                            <div class="p-col-8">
                                <input placeholder="Nom de l'équipement" [(ngModel)]="gearSearch" type="text"/>
                            </div>
                            <div class="p-col-4">
                                <button type="button" class="btn btn-sm btn-secondary" (click)="searchGear()">Chercher</button>
                            </div>
                            <div class="p-col-12">
                                <span>R&eacute;sultat(s) : {{gearList.length}}</span>
                                <ul>
                                    <li *ngFor="let gear of gearList">
                                        <span>{{gear.gearName}} ({{gear.pointValue}} points)</span>
                                        <button class="btn btn-sm btn-icon info" (click)="addGearToUnit(gear, unitMap)">
                                            <i class="material-icons">add_circle_outline</i>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
				</li>
			</ul>
		</dl>

		<dl class="p-col-12 jh-entity-details">
			<button type="button" (click)="addNewUnit = true;" class="btn btn-primary" *ngIf="!addNewUnit">
				Ajouter une unit&eacute;
			</button>
			<dt *ngIf="addNewUnit">
				<div class="p-grid">
                    <div class="p-col-12">
                        <button class="btn btn-info" type="button"
                                [routerLink]="['/unit-lbr/new']">
                            Cr&eacute;er une nouvelle unit&eacute;
                        </button>
                    </div>
                    <div class="p-col-12">
                        <span>Choisir une unit&eacute; existante :</span>
                        <div class="p-col-8">
                            <input placeholder="Nom de l'unité" [(ngModel)]="unitSearch" type="text"/>
                        </div>
                        <div class="p-col-4">
                            <button type="button" class="btn btn-sm btn-secondary" (click)="searchUnit()">Chercher</button>
                        </div>
                    </div>
					<div class="p-col-12" *ngIf="availableUnit | async as availableUnits">
                        <span>R&eacute;sultat(s) : {{availableUnits.body.length}}</span>
						<ul>
							<li *ngFor="let unit of availableUnits.body">
								<button class="btn btn-sm btn-primary btn-li"
									type="button" (click)="associate(unit)">
									{{unit.unitName}}
								</button>
							</li>
						</ul>
					</div>
				</div>
			</dt>
		</dl>

		<div class="p-col-12">
			<button type="submit" (click)="previousState()" class="btn btn-info">
				<fa-icon icon="arrow-left"></fa-icon>
				&nbsp;<span jhiTranslate="entity.action.back">Back</span>
			</button>

			<button type="button"
				[routerLink]="['/army-list-lbr', armyList.id, 'edit']"
				class="btn btn-primary">
				<fa-icon icon="pencil-alt"></fa-icon>
				&nbsp;<span jhiTranslate="entity.action.edit">Edit</span>
			</button>
		</div>
	</div>
</div>
